# 计算机网络第五次课后作业

**班级：2021 级软件工程（普通）2 班**

**学号：222021321262043**

**姓名：杨锦烨**

[toc]

## 第6章

### P1

由于使用了偶校验方案，在采用二维奇偶校验方案的情况下，最后一列和最后一行为校验位。使用最小长度检验和字段如下：

| 1    | 1    | 1    | 0    | 1    |
| ---- | ---- | ---- | ---- | ---- |
| 0    | 1    | 1    | 0    | 0    |
| 1    | 0    | 0    | 1    | 0    |
| 1    | 1    | 0    | 1    | 1    |
| 1    | 1    | 0    | 0    | 0    |

### P11

#### a

A在时隙5首先成功的概率，这里翻译有点奇怪，理解为求节点A自身第一次成功发送分组是在时隙5的概率。

$P(A在一个时隙中成功发送分组) = p\cdot(1-p)^3$   （时隙5只有A发包，其余3个节点都不发包的概率）

随机变量X为A第一次发包成功的时隙数，X服从参数为$p\cdot(1-p)^3$的几何分布

$P(X = 5) = (1-p\cdot(1-p)^3)^4\cdot p\cdot(1-p)^3$

所以节点A在时隙5首先成功的概率为$(1-p\cdot(1-p)^3)^4\cdot p\cdot(1-p)^3$。

#### b

$P(某个节点在时隙4中成功发送分组) = 4\cdot p\cdot(1-p)^3$

（相当于某个时隙中指定一个节点发送成功概率的4倍，即a中概率的4倍）

#### c

$P(某个时隙中有节点成功发送分组) = 4\cdot p\cdot(1-p)^3$

$P(某个时隙中没有节点成功发送分组) = 1-4\cdot p\cdot(1-p)^3$

$P(时隙3中首次出现节点成功发送分组) = P(某个时隙中没有节点成功发送分组) ^2 \cdot P(某个时隙中有节点成功发送分组) = (1-4\cdot p\cdot(1-p)^3)^2 \cdot 4\cdot p\cdot(1-p)^3$

#### d

效率 = $P(某个时隙中有节点成功发送分组) = 4\cdot p\cdot(1-p)^3$

### P14

设左侧路由器名为R1，右侧侧路由器名为R2，其左右接口名称如图：

![pic1](Pics\pic1.png) 

#### a



| 接口名 | IP地址      |
| ------ | ----------- |
| A      | 192.168.1.1 |
| B      | 192.168.1.3 |
| C      | 192.168.2.1 |
| D      | 192.168.2.4 |
| E      | 192.168.3.1 |
| F      | 192.168.3.3 |
| G      | 192.168.1.2 |
| H      | 192.168.2.2 |
| I      | 192.168.2.3 |
| J      | 192.168.3.2 |

#### b

| 适配器名 | MAC地址           |
| -------- | ----------------- |
| A        | 00-00-00-00-00-00 |
| B        | 11-11-11-11-11-11 |
| C        | 44-44-44-44-44-44 |
| D        | 66-66-66-66-66-66 |
| E        | 77-77-77-77-77-77 |
| F        | 99-99-99-99-99-99 |
| G        | 22-22-22-22-22-22 |
| H        | 33-33-33-33-33-33 |
| I        | 55-55-55-55-55-55 |
| J        | 88-88-88-88-88-88 |

#### c

1. E由转发表确定数据报应路由到接⼝192.168.3.2（R2的右侧）
2. E中的适配器通过ARP寻址，创建一个⽬的MAC地址为88-88-88-88-88-88的以太⽹数据包并发送
3. R2接收数据包并提取数据报。此路由器中的转发表指⽰数据报将被路由到198.162.2.2
4. R2然后进行ARP寻址，创建⽬的MAC地址为33-33-33-33-33-33和源地址为55- 55-55-55-55-55的数据包，通过左侧IP地址为198.162.2.3的接口发送到R1为198.162.2.2的接口
5. R1接收数据包并提取数据报。此路由器中的转发表指⽰数据报将被路由到198.162.1.3
6. R1然后进行ARP寻址，创建⽬的MAC地址为11-11-11-11-11-11（此时的MAC地址才为B的地址）和源地址为22-22-22-22-22-22的数据包，通过左侧IP地址为198.162.1.2的接口发送到R1为198.162.1.3的接口
7. B接受数据包并提取数据报，检查到该帧的MAC地址与自身地址匹配，沿协议栈逐层上传数据包

#### d

1. E由转发表确定数据报应路由到接⼝192.168.3.2（R2的右侧）
2. 主机E在⼴播以太⽹帧内发送ARP查询包
3. R2接收查询包并向主机E发送ARP响应包。此ARP响应包由以太⽹帧承载，⽬的MAC地址为 77-77-77-77-77-77
4. E中的适配器通过ARP寻址，创建一个⽬的MAC地址为88-88-88-88-88-88的以太⽹数据包并发送
5. R2接收数据包并提取数据报。此路由器中的转发表指⽰数据报将被路由到198.162.2.2
6. R2然后进行ARP寻址，创建⽬的MAC地址为33-33-33-33-33-33和源地址为55- 55-55-55-55-55的数据包，通过左侧IP地址为198.162.2.3的接口发送到R1为198.162.2.2的接口
7. R1接收数据包并提取数据报。此路由器中的转发表指⽰数据报将被路由到198.162.1.3
8. R1然后进行ARP寻址，创建⽬的MAC地址为11-11-11-11-11-11（此时的MAC地址才为B的地址）和源地址为22-22-22-22-22-22的数据包，通过左侧IP地址为198.162.1.2的接口发送到R1为198.162.1.3的接口
9. B接受数据包并提取数据报，检查到该帧的MAC地址与自身地址匹配，沿协议栈逐层上传数据包

（只加了2，3步，发ARP查询包并接受）

### P15

#### a

不。因为它们不在同⼀个局域⽹内，E可以通过检查B的IP地址以得知。

E到F的以太⽹帧：

| 源IP地址  | 目的IP地址 | 源MAC地址  | 目的MAC地址 |
| --------- | ---------- | ---------- | ----------- |
| E的IP地址 | F的IP地址  | E的MAC地址 | F的MAC地址  |

#### b

不。因为它们不在同⼀个局域⽹上。E可以通过检查B的IP地址以得知。

E到R1的以太⽹帧：

| 源IP地址  | 目的IP地址 | 源MAC地址  | 目的MAC地址                      |
| --------- | ---------- | ---------- | -------------------------------- |
| E的IP地址 | B的IP地址  | E的MAC地址 | R1与E所在子网连接的接⼝的MAC地址 |

#### c

+ 将A的MAC地址，报文到达的接口，时间记录在交换机表中，然后通过两个接⼝⼴播A的请求报文，从而将报文发给B和R1

+ R1会收到

+ R1不会转发，R1检查请求报文的目标IP前缀后，会发现不在子网3中，因此不会转发

+ 不会，因为B可以从A的请求报文中的源地址中得到A的MAC地址

+ 将B的MAC地址和报文到达的接口，时间记录在交换机表中，然后丢掉接受到的该以太网帧，因为A与B来自同一接口

### P22

#### i

A到左侧交换机：

| 源IP地址  | 目的IP地址 | 源MAC地址  | 目的MAC地址                   |
| --------- | ---------- | ---------- | ----------------------------- |
| A的IP地址 | F的IP地址  | A的MAC地址 | 右侧路由器的左侧接口的MAC地址 |

#### ii

左侧交换机到右侧路由器：

| 源IP地址  | 目的IP地址 | 源MAC地址  | 目的MAC地址                   |
| --------- | ---------- | ---------- | ----------------------------- |
| A的IP地址 | F的IP地址  | A的MAC地址 | 右侧路由器的左侧接口的MAC地址 |

#### iii

左侧交换机到右侧路由器：

| 源IP地址  | 目的IP地址 | 源MAC地址                     | 目的MAC地址 |
| --------- | ---------- | ----------------------------- | ----------- |
| A的IP地址 | F的IP地址  | 右侧路由器的右侧接口的MAC地址 | F的MAC地址  |

### P32

#### a

对图6-30，由于每个流具有相同的数据率，所以均匀分布⼀个链路的容量。而对于这80个流，由于机架1-8与9-16不在同一个第一层交换机下，所以80个流通过接⼊路由器和界路由器一条链路连接，均分之后每条流的最大速率为$\frac{10Gbps}{80} = 125Mbps$。

#### b

对图6-31，从图论的角度看，该图为二部图，并且两个部分节点数量均为4，到对方每一个节点都是可达的。所以一个第二层交换机到其它第二层交换机的任意一个的路径都有4条。分配给第二层交换机其下的4个机架，每个机架都有1条路径，为10Gbps。由于每个机架有10条流，所以一条流的最大速率为$\frac{10Gbps}{10} = 1Gbps$

#### c

对图6-30，由于每个流具有相同的数据率，所以均匀分布⼀个链路的容量。而对于这160个流，由于机架1-8与9-16不在同一个第一层交换机下，所以160个流通过接⼊路由器和界路由器一条链路连接，均分之后每条流的最大速率为$\frac{10Gbps}{160} = 62.5Mbps$。

对图6-31，从图论的角度看，该图为二部图，并且两个部分节点数量均为4，到对方每一个节点都是可达的。所以一个第二层交换机到其它第二层交换机的任意一个的路径都有4条。分配给第二层交换机其下的4个机架，每个机架都有1条路径，为10Gbps。由于每个机架有20条流，所以一条流的最大速率为$\frac{10Gbps}{20} = 500Mbps$。

## 第7章

### P1

因为$d_1$为-1，所以输出：[-1,1,-1,1,-1,1,-1,1]，$d_0$为1，所以输出：[1,-1,1,-1,1,-1,1,-1]。所以输出[-1,1,-1,1,-1,1,-1,1,1,-1,1,-1,1,-1,1,-1]。

### P8

假设一个报文的大小为s，一个时隙的大小为t

#### a

s/2t

因为C到B需要一个时隙，B到A需要一个时隙，所以总时间为2t。

#### b

2s/t

因为在一个时隙中传输了2个报文，耗费时间为t，所以组合速率为2s/t

#### c

s/t

总报文大小为2s。因为C传输时，B/D都能听到，所以要分时隙发送，防止碰撞。所以总时间为2t。所以组合速率为2s/2t = s/t。

#### d

因为有线，所以(c)不考虑碰撞不分时隙。

​	(a) s/t

​	(b) 2s/t

​	(c) 2s/t

#### e

​	(a) 因为B传输时，A/C都能听到，C传输时，B/D都能听到，所以要C->B需要1t，B->C需要1t，B->A需要1t，A->B需要1t，总时间为4t，报文大小为s。速率为s/4t

​	(b) 时隙1：A->B，D->C，时隙2：（ACK）B->A（时隙2不能有D->C，因为题中指出一个时隙内只能发送，接受一个报文或静默，时隙2中C在接受B的报文，不能接受D的报文），时隙3：（ACK）C->D。总时间为3t，报文大小为2s。速率为2s/3t

​	(c) 时隙1：C->D，时隙2：（ACK）D->C，A-B，时隙3：（ACK）B->A。总时间为3t，报文大小为2s。速率为2s/3t

### P10

#### a

如果全向节点A发送，最大速率为10Mbps。

不公平，因为此时只有A节点正在接受数据。

公平的含义：每个站点在每秒期间必须收到等量的数据。

#### b

设A,B,C,D四个节点获得的LTE的时隙数分别为$n_1$,$n_2$,$n_3$,$n_4$，一个时隙的时长为$t$，总节点数为$N$。

则在一个t中A获得的数据量为$10 \cdot t \cdot n_1$，因为需要每个站点在每秒期间收到等量的数据，所以：
$$
10 \cdot t \cdot n_1 = 5 \cdot t \cdot n_2 = 2.5 \cdot t \cdot n_3 = 1 \cdot t \cdot n_4
$$
又因为：
$$
n_1+ n_2+ n_3+ n_4 = N
$$
所以推出：
$$
n_1 = N/17
$$

$$
n_2 = 2N/17
$$

$$
n_3 = 4N/17
$$

$$
n_4 = 10N/17
$$

所以平均传输速率为：
$$
(10 \cdot t \cdot n_1 + 5 \cdot t \cdot n_2 + 2.5 \cdot t \cdot n_3 + t \cdot n_4)/t \cdot N = \frac{40}{17} = 2.35Mbps
$$

#### c

规划得到向节点发送速率最大的情况为A的节点数为B,C,D的2倍，所以：
$$
10 \cdot t \cdot n_1 = 2 \cdot 5 \cdot t \cdot n_2 = 2 \cdot 2.5 \cdot t \cdot n_3 = 2 \cdot 1 \cdot t \cdot n_4
$$
又因为：
$$
n_1+ n_2+ n_3+ n_4 = N
$$
所以平均传输速率为：
$$
(10 \cdot t \cdot n_1 + 5 \cdot t \cdot n_2 + 2.5 \cdot t \cdot n_3 + t \cdot n_4)/t \cdot N = \frac{25}{9} = 2.78Mbps
$$