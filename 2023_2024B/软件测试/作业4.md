# 软件测试作业4

班级：2021级软件工程（普通）2班

学号：222021321262043

姓名：杨锦烨

## 问题1

### 题目

给定一个求解一元二次方程的程序

```C++
int main() {
	float a, b, c, x1, x2, mid;
	scanf("%f %f %f", &a, &b, &c);
	if (a != 0) {
		mid = b * b - 4 * a * c;
		if (mid > 0) {
			x1 = (-b + sqrt(mid)) / (2 * a);
			x2 = (-b - sqrt(mid)) / (2 * a);
			printf("two real roots\n");
		} else {
			if (mid == 0) {
				x1 = -b / 2 * a;
				printf("one real root\n");
			} else {
				x1 = -b / (2 * a);
				x2 = sqrt(-mid) / (2 * a);
				printf("two complex roots\n");
			}
		}
		printf("x1 = % f, x2 = % f\n", x1, x2);
	}
	
	return 0;
}
```

要求：

1. 用语句覆盖准则对该程序设计测试用例
2. 用分支覆盖准则对该程序设计测试用例

### 流程图

![P8](pics\P11.png) 

### 语句覆盖设计测试用例

覆盖完流程图中所有的点。


| 序号 | a    | b    | c    | 预期输出                                                     | 覆盖语句（流程图中的序号）  |
| ---- | ---- | ---- | ---- | ------------------------------------------------------------ | --------------------------- |
| 1    | 1    | 1    | 0    | two real roots<br />x1 = 0, x2 = -1                          | 1, 2, 3, 4, 5, 6, 10, 11    |
| 2    | 1    | 0    | 1    | two complex roots<br />x1 = 0, x2 = 1（x1为其中一个根的实部，x2为该根的虚部） | 1, 2, 3, 4, 5, 7, 9, 10, 11 |
| 3    | 1    | -2   | 1    | one real root<br />x1 = 1, x2 = 0（只输出一个根x1）          | 1, 2, 3, 4, 5, 7, 8, 10, 11 |

### 分支覆盖设计测试用例

覆盖完流程图中所有的边。

| 序号 | a    | b    | c    | 预期输出                                                     | 覆盖语句（流程图中的序号）  |
| ---- | ---- | ---- | ---- | ------------------------------------------------------------ | --------------------------- |
| 1    | 1    | 1    | 0    | two real roots<br />x1 = 0, x2 = -1                          | 1, 2, 3, 4, 5, 6, 10, 11    |
| 2    | 1    | 0    | 1    | two complex roots<br />x1 = 0, x2 = 1（x1为其中一个根的实部，x2为该根的虚部） | 1, 2, 3, 4, 5, 7, 9, 10, 11 |
| 3    | 1    | -2   | 1    | one real root<br />x1 = 1, x2 = 0（只输出一个根x1）          | 1, 2, 3, 4, 5, 7, 8, 10, 11 |
| 4    | 0    | 2    | 3    | 无                                                           | 1, 2, 3, 11                 |



## 问题2

### 题目

给定程序：

```C
int main(){
	int i,  j,  k,  match;
	scanf("%d %d %d",  &i,  &j,  &k);  
	if(i <= 0 || j <= 0 || k <= 0 || i + j <= k || i + k <= j || j + k <= i){
		match=4;//不构成三角形
	}  
	else if(i == j && i == k && j == k){
		match=1;//等边三角形
	}
	else if(i == j || i == k || j == k){
		match=2;//等腰三角形
	}
	else{
		match=3;//非等腰三角形
	}
	printf("match = %d\n", match);
	
	return 0;
}
```

要求：

1. 用条件覆盖准则对该程序设计测试用例
2. 用分支-条件覆盖准则对该程序设计测试用例
3. 用组合覆盖准则对该程序设计测试用例

### 分析

| match | 形状         |
| ----- | ------------ |
| 1     | 等边三角形   |
| 2     | 等腰三角形   |
| 3     | 非等腰三角形 |
| 4     | 不构成三角形 |

### 条件覆盖设计测试用例

A：i <= 0 || j <= 0 || k <= 0 || i + j <= k || i + k <= j || j + k <= i

B：i == j && i == k && j == k

C：i == j || i == k || j == k

测试用例：

**实际上有问题，第一个语句执行完后就不执行了，其实后面的条件没有执行到，下面那个才是对的**

| 序号 | 输入i | 输入j | 输入k | i <= 0 | j <= 0 | k <= 0 | i + j <= k | i + k <= j | j + k <= i | i == j | i == k | j == k | 预期输出  |
| ---- | ----- | ----- | ----- | ------ | ------ | ------ | ---------- | ---------- | ---------- | ------ | ------ | ------ | --------- |
| 1    | 0     | 0     | 0     | T      | T      | T      | T          | T          | T          | T      | T      | T      | match = 4 |
| 2    | 2     | 3     | 4     | F      | F      | F      | F          | F          | F          | F      | F      | F      | match = 3 |

如上所有条件均被覆盖。

### 分支-条件覆盖设计测试用例

A：i <= 0 || j <= 0 || k <= 0 || i + j <= k || i + k <= j || j + k <= i

B：i == j && i == k && j == k

C：i == j || i == k || j == k

测试用例：

| 序号 | i    | j    | k    | i <= 0 | j <= 0 | k <= 0 | i + j <= k | i + k <= j | j + k <= i | i == j | i == k | j == k | A    | B    | C    | 预期输出  |
| ---- | ---- | ---- | ---- | ------ | ------ | ------ | ---------- | ---------- | ---------- | ------ | ------ | ------ | ---- | ---- | ---- | --------- |
| 1    | 0    | 0    | 0    | T      | T      | T      | T          | T          | T          | T      | T      | T      | T    | T    | T    | match = 4 |
| 2    | 2    | 3    | 4    | F      | F      | F      | F          | F          | F          | F      | F      | F      | F    | F    | F    | match = 3 |
| 3    | 2    | 3    | 3    | F      | F      | F      | F          | F          | F          | F      | F      | T      | F    | F    | T    | match = 2 |
| 4    | 3    | 2    | 3    | F      | F      | F      | F          | F          | F          | F      | T      | F      | F    | F    | T    | match = 2 |
| 5    | 3    | 3    | 2    | F      | F      | F      | F          | F          | F          | T      | F      | F      | F    | F    | T    | match = 2 |
| 6    | 2    | 2    | 2    | F      | F      | F      | F          | F          | F          | T      | T      | T      | F    | T    | T    | match = 1 |

如上所有条件均被覆盖且所有判定结果均被覆盖。

### 组合覆盖设计测试用例

A：i <= 0 || j <= 0 || k <= 0 || i + j <= k || i + k <= j || j + k <= i

B：i == j && i == k && j == k

C：i == j || i == k || j == k

测试用例：

A中一共6个条件，先考虑对A中条件的组合，至多有$2^6 = 64$种，但是其中有部分互相冲突的条件，另外两种条件各位$2^3 = 8$种，结合判定覆盖如下：



| 序号 | i    | j    | k    | i<=0 | j<=0 | k<=0 | i + j <= k | i + k <= j | j + k <= i | i == j | i == k | j == k | A    | B    | C    | 预期输出 |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---------- | ---------- | ---------- | ------ | ------ | ------ | ---- | ---- | ---- | -------- |
| 1    | 1    | 1    | 1    | F    | F    | F    | F          | F          | F          | T      | T      | T      | F    | T    | T    | match=1  |
| 2    | 1    | 2    | 2    | F    | F    | F    | F          | F          | F          | F      | F      | T      | F    | F    | T    | match=2  |
| 3    | 2    | 2    | 1    | F    | F    | F    | F          | F          | F          | T      | F      | F      | F    | F    | T    | match=2  |
| 4    | 2    | 1    | 2    | F    | F    | F    | F          | F          | F          | F      | T      | F      | F    | F    | T    | match=2  |
| 5    | 4    | 5    | 6    | F    | F    | F    | F          | F          | F          | F      | F      | F      | F    | F    | F    | match=3  |
| 6    | 3    | 1    | 2    | F    | F    | F    | F          | F          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 7    | 2    | 1    | 1    | F    | F    | F    | F          | F          | T          | F      | F      | T      | T    | F    | F    | match=4  |
| 8    | 2    | 1    | -1   | F    | F    | T    | F          | F          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 9    | 2    | 0    | 1    | F    | T    | F    | F          | F          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 10   | 2    | 0    | -1   | F    | T    | T    | F          | F          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 11   | 1    | 3    | 2    | F    | F    | F    | F          | T          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 12   | 1    | 2    | 3    | F    | F    | F    | T          | F          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 13   | 1    | 1    | 0    | F    | F    | T    | F          | T          | T          | T      | F      | F      | T    | F    | F    | match=4  |
| 14   | 1    | 2    | 1    | F    | F    | F    | F          | T          | F          | F      | T      | F      | T    | F    | F    | match=4  |
| 15   | 1    | 2    | 0    | F    | F    | T    | F          | T          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 16   | 1    | 2    | -1   | F    | F    | T    | F          | T          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 17   | 1    | 1    | 2    | F    | F    | F    | T          | F          | F          | T      | F      | F      | T    | F    | F    | match=4  |
| 18   | 1    | 0    | 2    | F    | T    | F    | T          | F          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 19   | 1    | 0    | 1    | F    | T    | F    | T          | F          | T          | F      | T      | F      | T    | F    | F    | match=4  |
| 20   | 1    | 0    | 0    | F    | T    | T    | F          | F          | T          | F      | F      | T      | T    | F    | F    | match=4  |
| 21   | 1    | 0    | -1   | F    | T    | T    | F          | T          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 22   | 1    | -1   | 2    | F    | T    | F    | T          | F          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 23   | 1    | -1   | 0    | F    | T    | T    | T          | F          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 24   | 0    | 2    | 1    | T    | F    | F    | F          | T          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 25   | 0    | 2    | -1   | T    | F    | T    | F          | T          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 26   | 0    | 1    | 2    | T    | F    | F    | T          | F          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 27   | 0    | 1    | 1    | T    | F    | F    | T          | T          | F          | F      | F      | T      | T    | F    | F    | match=4  |
| 28   | 0    | 1    | 0    | T    | F    | T    | F          | T          | F          | F      | T      | F      | T    | F    | F    | match=4  |
| 29   | 0    | 1    | -1   | T    | F    | T    | F          | T          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 30   | 0    | 0    | 1    | T    | T    | F    | T          | F          | F          | T      | F      | F      | T    | F    | F    | match=4  |
| 31   | 0    | 0    | 0    | T    | T    | T    | T          | T          | T          | T      | T      | T      | T    | F    | F    | match=4  |
| 32   | 0    | 0    | -1   | T    | T    | T    | F          | T          | T          | T      | F      | F      | T    | F    | F    | match=4  |
| 33   | 0    | -1   | 2    | T    | T    | F    | T          | F          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 34   | 0    | -1   | 1    | T    | T    | F    | T          | F          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 35   | 0    | -1   | 0    | T    | T    | T    | T          | F          | T          | F      | T      | F      | T    | F    | F    | match=4  |
| 36   | 0    | -1   | -1   | T    | T    | T    | T          | T          | T          | F      | F      | T      | T    | F    | F    | match=4  |
| 37   | 0    | -1   | -2   | T    | T    | T    | F          | T          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 38   | 0    | -2   | -1   | T    | T    | T    | T          | F          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 39   | -1   | 1    | 2    | T    | F    | F    | T          | T          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 40   | -1   | 1    | 0    | T    | F    | T    | T          | T          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 41   | -1   | 0    | 1    | T    | T    | F    | T          | T          | F          | F      | F      | F      | T    | F    | F    | match=4  |
| 42   | -1   | 0    | 0    | T    | T    | T    | T          | T          | F          | F      | F      | T      | T    | F    | F    | match=4  |
| 43   | -1   | 0    | -1   | T    | T    | T    | T          | T          | T          | F      | T      | F      | T    | F    | F    | match=4  |
| 44   | -1   | -1   | 0    | T    | T    | T    | T          | T          | T          | T      | F      | F      | T    | F    | F    | match=4  |
| 45   | -1   | -2   | -3   | T    | T    | T    | T          | T          | T          | F      | F      | F      | T    | F    | F    | match=4  |
| 46   | -2   | 0    | -1   | T    | T    | T    | T          | T          | F          | F      | F      | F      | T    | F    | F    | match=4  |
## 问题3

### 题目

给定程序：

```C
int Test(int i_count, int i_flag) {
	int i_temp = 0;
	while (i_count > 0) {
		if (0 == i_flag) {
			i_temp = i_count + 100;
			break;
		} else {
			if (1 == i_flag) {
				i_temp = i_temp + 10;
			} else {
				i_temp = i_temp + 20;
			}
		}
		i_count--;
	}
	return i_temp;
}
```

```
函数说明 ：
当i_flag = 0；返回i_count + 100
当i_flag = 1；返回i_count * 10
否则返回i_count * 20
```

要求：

1. 用基路径测试方法，画出DD路径图
2. 计算圈复杂度
3. 列出基路径
4. 设计对应的测试用例

### 流程图和DD路径图

流程图：

![P8](pics\P8.png) 

DD路径图：

将流程图转化为如下DD路径图

![P8](pics\P9.png) 

### 圈复杂度

e：10（边的数量为10）

n：8（节点数量为8）

V(G) = e - n + 2p = 4

### 基路径

| 序号 | 基路径          | 覆盖边           |
| ---- | --------------- | ---------------- |
| P1   | 4-5-7-9-10-4-11 | b, c, d, f, h, a |
| P2   | 4-5-7-8-10-4-11 | b, c, e, g, h, a |
| P3   | 4-5-6-11        | b, i, j          |
| P4   | 4-11            | a                |

### 测试用例

| 序号 | i_count | i_flag | 预期输出 | 覆盖路径        | 覆盖边           |
| ---- | ------- | ------ | -------- | --------------- | ---------------- |
| 1    | 5       | 2      | 100      | 4-5-7-9-10-4-11 | b, c, d, f, h, a |
| 2    | 5       | 1      | 50       | 4-5-7-8-10-4-11 | b, c, e, g, h, a |
| 3    | 5       | 0      | 5        | 4-5-6-11        | b, i, j          |
| 4    | 0       | 0      | 0        | 4-11            | a                |

